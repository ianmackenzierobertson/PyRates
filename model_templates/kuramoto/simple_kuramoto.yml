%YAML 1.2
---

Op_base:
  base: OperatorTemplate
  equations:
    - "d/dt * theta = omega + K*net_in + ext_in"
  variables:
    theta:
      default: output
    omega:
      default: 10.0
    K:
      default: 1.0
    net_in:
      default: input
    ext_in:
      default: input

Op_coupling:
  base: OperatorTemplate
  equations:
    - "s = sin(theta_s-theta_t)"
  variables:
    theta_s:
      default: input
    theta_t:
      default: input
    s:
      default: output

Sin_edge:
  base: EdgeTemplate
  operators:
    - Op_coupling

KM:
  base: NodeTemplate
  operators:
    - Op_base

KM_single:
  base: CircuitTemplate
  nodes:
    p1: KM

KMN:
  base: CircuitTemplate
  nodes:
    p1: KM
    p2: KM
  edges:
    - [p1/Op_base/theta, p2/Op_base/net_in, Sin_edge, {weight: -4.0, Sin_edge/Op_coupling/theta_s: source,
                                                       Sin_edge/Op_coupling/theta_t: p2/Op_base/theta}]
    - [p2/Op_base/theta, p1/Op_base/net_in, Sin_edge, {weight: -4.0, Sin_edge/Op_coupling/theta_s: source,
                                                       Sin_edge/Op_coupling/theta_t: p1/Op_base/theta}]
